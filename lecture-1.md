# Lecture 1: 基础

说明：

- 假设您已经具有基本的计算机知识
- 不要求您具备高深复杂的计算机知识
- 这不是就业培训材料也不是面试指南



Java源于Sun MicroSytems公司的James Gosling博士于1991年发明的一个名叫Oak的编程语言，当时主要想用在消费电子产品（比如机顶盒之类）上，但是没成气候。到了1995年，互联网在美国开始风起云涌，Sun认为这是个机会，就将Oak改名叫Java，在SunWorld大会上，发布了Java 1.0，Slogan是：Write Once, Run Anywhere。这个事件标志着Java正式诞生，20多年过去了，Java和JVM演变成一个庞大的软件开发体系和生态系统，在企业应用和互联网领域大放异彩。

我们知道，计算机有不同的硬件结构，不同的操作系统。那么，运行在其上的软件，肯定会有一些差异，这叫作“不兼容”。软件的兼容性分为两个层面：

- 源代码兼容

  如果您在编程的时候，只用了语言本身提供的机制以及标准库，那么编写出来的源代码，与更下一层的操作系统无关。这个源代码是可以被移植到其它系统上而不用修改的（或者很少量的修改），编译器知道怎么产生相应平台的目标代码。

- 二进制兼容

  如果源代码被编译成二进制之后的可执行文件（或者库），也能在不同平台上运行，这就是二进制层面的兼容了。这通常只能在同一种操作系统上才能做到，比如一个软件可以在Windows XP上运行，也能在Windows 10上运行；或者一个.so的动态链接库可以适用于多种Linux发行版。

当然，软件开发层面，还有API级别的兼容。这个跟我们要讲的东西，暂时无关，以后再细说。

所以您看，二进制兼容做不到，源代码兼容也很麻烦（尤其是代码里用到了平台特定的API）。那么“一次编写，到处运行”对开发者而言，就成了一个非常吸引人的特性。要实现这个目标，就得引入一个新的概念：虚拟机（Virtual Machine, VM。Java虚拟机被叫作JVM）。虚拟机的作用是，屏蔽不同的硬件架构和操作系统的复杂细节，对软件开发者提供一个一致的开发模型和运行时环境。总而言之，Java就是一个基于虚拟机的编程语言，基本上可以达到“Write Once, Run Anywhere”的目标，我们先建立这么一个初步的认识，以便能够继续学习后续内容，最后一讲，我们将专门来讨论JVM。

## 1.1 类型系统

计算机的程序设计语言(Programming Language, PL)跟我们人类交流、写作用的自然语言的作用类似，只不过交流的双方，一方是软件开发者，另一方是计算机。机器是一个很死板的、不会变通的东西，所以程序设计语言要比自然语言更为抽象和严谨，比如机器就不懂得去猜测双关语的意思。类型系统就是一个抽象的模型，用来描述现实世界里纷繁复杂的事物。

程序设计语言的类型，大致有两种思路：静态类型（强类型）和动态类型（弱类型）。所谓静态类型就是，任何变量，在编译期都必须明确地、显示地指定一个类型，在指定之后就不可更改了。C，C++, C#, Java包括现在流行的Rust都是静态类型的语言：

```
int i = 1；
float f = 2.0f;
let age : u8 = 32;
```

不同的语言，定义的语法有差别，但核心是一样的，都必须指定类型（ int, float, u8 这样的东西）。与之相反的是，弱类型的动态语言，不需要显示指定变量的数据类型，在运行时，编译器、虚拟机会去推断变量到底应该是个什么类型，最为典型的就是JavaScript和Python这两种语言：

```
let age = 32
var name = "John Denver";
address = '北京市海淀区上地七街'
```

弱类型的语言通常被称作动态语言或脚本语言，它的运行方式是由虚拟机逐行解释执行的，不需要由程序员手工编译成平台目标代码或者字节码(Byte Code)或者翻译为中间语言(IL)。它的优点是，编程相对自由一些，同一个变量，上面存放的是整数，隔几行代码，又用来存放字符串了。当然随之带来的麻烦就是更容易出错，尤其是在代码量较大的项目里。

我们也不一定要在静态或者动态类型的语言里分个优劣。风水是轮流转的，早些年的语言都是静态类型的，大家就觉得动态类型推断的很酷，所以就涌现了很多动态类型的语言，甚至静态语言也从语法层面可以模拟一下：

```
//Java
var i = 32;
```

这看起来跟JavaScript颇为相像了，但它只是一个语法糖（Syntactic Sugar），类型推断是在编译时进行的，和运行时类型推断有本质区别。

当弱类型语言盛极一时的时候，大家又开始反思它的缺点，尤其是带来的软件工程方面的问题，设计出了像Rust这样的静态语言，用极度严格的类型检查来避免不必要的错误，降低软件开发和维护的成本。

但是，不管是静态还是动态类型的语言，或者说，不论是否要求程序员显示地声明变量类型，一个变量它都应该属于某个类型才对。我们把目光聚焦到Java的类型系统上来，考察它如何用有限的类型描述无穷的世界。

在Java中，类型被分为基本类型（Primitive Types）和引用类型（Reference Types）。基本类型有时候也称之为内置类型（Built-in Types），包括了数值类型、布尔类型和字符（通常也被认为是数值的一种）几种，参见下表：

| #    | 类型名  | 说明                                                         |
| ---- | ------- | ------------------------------------------------------------ |
| 1    | byte    | 字节，8 bits，表示-128 - 127之间的整数                       |
| 2    | short   | 短整数，2 bytes，表示 -32768 - 32767之间的整数               |
| 3    | int     | 整数，4 bytes，表示的范围在正负20多亿之间                    |
| 4    | long    | 长整数，8 bytes，绝大多数情况下，它的表示范围都够用了        |
| 5    | float   | 单精度浮点数，4 bytes，遵循IEEE-754标准                      |
| 6    | double  | 双精度浮点数，8 bytes，IEEE-754标准,范围和精度都比float大    |
| 7    | boolean | true \| false，表达一种二值状态，黑/白，是/否，有/无，开/关，死/活... |
| 8    | char    | 字符，可以表示UNICODE字符集中从'\u0000' - ''\uffff'之间的字符，范围相当于 unsigned short |

